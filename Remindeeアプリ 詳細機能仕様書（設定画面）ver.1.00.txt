  Remindeeアプリ 詳細機能仕様書（設定画面）


  本仕様書は、提供された設定画面.png画像に基づいて、Remindeeアプリケーションの「設定画面」を構成するUI要素、
  トリガーイベント、およびそれに対するシステムの振る舞いを詳細に記述します。

  ---

  1. 設定画面


  設定画面は、ユーザーがデータのインポート/エクスポート、Googleカレンダー連携、通知設定、およびアプリケーシ
  ョン情報の確認を行うためのインターフェースです。

  ##### 1.1. 画面全体の振る舞い


   * イベント: ホーム画面または他の画面からの「設定」アイコン/ボタンクリック
   * トリガー: ユーザーによる設定画面への遷移
   * 振る舞い:
       * アプリケーションの現在の設定状態（例: Googleサインイン状態、通知許可状態）およびアプリケーションの統
         計情報がロードされ、各UI要素に反映されます。
       * ユーザーが行った変更は、明示的な「保存」ボタンがない限り、即座に適用されるか、または画面を離れる際に
         自動的に保存されます。

  ##### 1.2. 主要なUI要素とインタラクション


  ###### 1.2.1. ヘッダー領域

   * 構成要素:
       * 画面タイトル: "設定"

  ###### 1.2.2. データエクスポート領域


   * 構成要素:
       * セクションタイトル: "データエクスポート"
       * 説明文: "すべての場面データをCSVファイルとしてダウンロードします。"
       * 「CSVファイルをダウンロード」ボタン: ダウンロードアイコンとテキスト
   * 「CSVファイルをダウンロード」ボタン
       * イベント: クリック/タップ
       * トリガー: ユーザーによるボタン操作
       * 振る舞い:
           1. アプリケーションに保存されているすべての場面データ（situation_id, situation_title, situation_detail, location, datetime, isPredicted, todo_id, todo_titl, todo_completed, todo_backgroundColor, todo_isPinned, subtodo_id, subtodo_title, subtodo_completed, subtodo_isPinned
）をCSV形式（BOM付きUTF-8）でエクスポートします。
           2. ブラウザのダウンロード機能を通じて、生成されたCSVファイルがユーザーのデバイスにダウンロードされま
              す。
           3. ダウンロードの成功/失敗に応じて、画面にメッセージが表示される場合があります。

  ###### 1.2.3. データインポート領域


   * 構成要素:
       * セクションタイトル: "データインポート"
       * 説明文: "CSVファイルから場面データを読み込みます。既存のデータは置き換えられます。"
       * 「CSVファイルを選択」ボタン: アップロードアイコンとテキスト
   * 「CSVファイルを選択」ボタン
       * イベント: クリック/タップ
       * トリガー: ユーザーによるボタン操作
       * 振る舞い:
           1. ファイル選択ダイアログが開き、ユーザーはデバイス上のCSVファイルを選択できます。
           2. ユーザーがCSVファイルを選択し、読み込みを承認した場合、選択されたCSVファイルの内容が解析されます
              。
           3. 解析されたデータは、既存のアプリケーションデータ（場面、ToDoなど）を完全に置き換えます。
           4. インポートの成功/失敗に応じて、画面にメッセージが表示されます。
           5. インポート処理中にエラー（例:
              ファイル形式が不正、データが破損している）が発生した場合、適切なエラーメッセージが表示されます。

  ###### 1.2.4. Googleカレンダー連携領域


   * 構成要素:
       * セクションタイトル: "Googleカレンダー連携"
       * 説明文: "場面データをGoogleカレンダーにエクスポートできます。"
       * Googleアカウント情報表示:
           * サインイン済時: ユーザーのプロフィール画像、名前（例: 博幸）、メールアドレス（例:
             amenowa@gmail.com）、Googleロゴ、チェック済アイコン、"Googleアカウントに接続済み"
             「カレンダーにエクスポート」ボタン、サインアウトボタン
           * 未サインイン時: 「Googleでログイン」ボタン（または同様の表示）
   * 「カレンダーにエクスポート」ボタン
       * イベント: クリック/タップ
       * トリガー: ユーザーによるボタン操作
       * 振る舞い:
           1. 未来の場面のToDoをGoogleカレンダーのイベントとしてエクスポートするフローを
              開始します。
           2. Google Calendar APIを呼び出し、イベントを作成します。
           3. エクスポートの成功/失敗に応じて、画面にメッセージが表示されます。
   * 「サインアウト」ボタン (サインイン済時)
       * イベント: クリック/タップ
       * トリガー: ユーザーによるボタン操作
       * 振る舞い:
           1. （もしログアウト機能がこのUI要素に紐づいている場合）Googleアカウントからのログアウト処理を実行し
              ます。
           2. アプリケーションのサインイン状態を解除し、表示が「Googleでログイン」ボタンに切り替わります。

   * 「Googleでログイン」ボタン (未サインイン時)
       * イベント: クリック/タップ
       * トリガー: ユーザーによるボタン操作
       * 振るまい:
           1. Google認証フローを開始します。
           2. ユーザーをGoogleの認証ページにリダイレクトします。
           3. 認証成功後、ユーザーはRemindeeアプリに戻り、サインイン状態が反映されます。アカウント情報表示がユ
              ーザーのプロフィールに更新されます。
           4. 認証失敗時やエラー発生時には、適切なエラーメッセージが画面に表示されます。


  ###### 1.2.5. 通知設定領域


   * 構成要素:
       * セクションタイトル: "通知設定"
       * 項目: "ブラウザ通知"
       * 説明文: "未来の場面の10分前にポップアップ通知を表示します。"
       * 通知許可状態表示: "許可済み" または "未許可"（または同様の表示）
   * 通知許可状態表示 (例: "許可済み")
       * イベント: クリック/タップ（通知設定を変更する機能がある場合）
       * トリガー: ユーザーによる表示領域の操作
       * 振る舞い:
           1. （もし通知設定の変更機能がこのUI要素に紐づいている場合）ブラウザの通知許可設定ダイアログを表示し
              ます。
           2. ユーザーが通知を許可または拒否した場合、その状態がアプリケーションに反映され、表示が更新されます
              。
           3. 通知設定はlocalStorageに永続化されます。
   * ブラウザ通知の動作:
       * アプリケーションは、未来の場面の開始時刻の10分前に、ブラウザのポップアップ通知をトリガーします。
       * 通知は、ブラウザがアクティブでない場合でも表示される可能性があります（ブラウザの機能に依存）。

  ###### 1.2.6. 表示設定領域

   * 構成要素:
       * セクションタイトル: "表示設定"
       * 項目: "完了済みの場面を表示"
       * トグルスイッチ: ON/OFFを切り替えるスイッチ
   * トグルスイッチ
       * イベント: クリック/タップ
       * トリガー: ユーザーによるスイッチの操作
       * 振る舞い:
           1.  スイッチを ON にすると、ホーム画面の場面リストにおいて、すべてのToDo（サブToDoを含む）が完了した場面が表示されます。
           2.  スイッチを OFF にすると、完了した場面は非表示になります。
           3.  重要: この表示/非表示の切り替えはCSSを通じて行われ、場面データ自体が削除されることはありません。そのため、再度スイッチをONにすれば、すべての場面情報が再び表示されます。
           4.  設定はアプリ内に保存され、次回起動時にも引き継がれます。
       * 初期値: ON (すべての場面を表示する)

  ###### 1.2.7. アプリ情報領域


   * 構成要素:
       * セクションタイトル: "アプリ情報"
       * 項目: "バージョン: [バージョン番号]" (例: 1.0.0)
       * 項目: "現在の場面数: [場面数]件" (例: 19件)
       * 項目: "総ToDo数: [ToDo数]件" (例: 58件)
   * 表示のみ:
       * これらの情報は、アプリケーションの現在の状態を示すものであり、ユーザーが直接操作して変更することはで
         きません。
       * アプリケーションの内部データに基づいて動的に更新されます。

  ###### 1.2.8. フッター領域


   * 構成要素:
       * 「戻る」ボタン
   * 「戻る」ボタン
       * イベント: クリック/タップ
       * トリガー: ユーザーによるボタン操作
       * 振る舞い:
           1. 設定画面を閉じ、ユーザーを前の画面（通常はホーム画面）に戻します。
